<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Convolution & Pooling</title>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
            }
        };
    </script>
    <link rel="stylesheet" href="../styles.css">
    <link rel="stylesheet" href="../scripts/demotab.css">
</head>
<body>
    <div class="iframe-content">
        <div class="container">

        <div class="info-tabs">
            <div class="tab-header">
            </div>
            <div class="tab-content">
                <div class="tab-panel active" data-tab-title="Introduction">
                    <h3>Convolution & Pooling Operations</h3>
                    <p>This interactive demonstration explores two fundamental operations in convolutional neural networks (CNNs): <strong>convolution</strong> and <strong>pooling</strong>.</p>

                    <p><strong>Convolution</strong> applies filters (kernels) to detect features like edges, patterns, and textures in images. Different filters highlight different characteristics of the input data.</p>

                    <p><strong>Pooling</strong> reduces the spatial dimensions of feature maps while preserving the most important information, making the network more efficient and translation-invariant.</p>

                    <p>Use the interactive controls to experiment with different input patterns, filters, and pooling operations to understand how these operations transform data in deep learning systems.</p>
                </div>

                <div class="tab-panel" data-tab-title="Theory">
                    <h3>Mathematical Foundation</h3>

                    <h4>Convolution Operation</h4>
                    <p>Convolution applies a filter $F$ to an input image $I$ to produce a feature map $O$:</p>
                    <p>$$O(i,j) = \sum_{m=0}^{M-1} \sum_{n=0}^{N-1} I(i+m, j+n) \cdot F(m,n)$$</p>

                    <p><strong>Key Concepts:</strong></p>
                    <ul>
                        <li><strong>Filters/Kernels:</strong> Small matrices (typically 3×3) that detect specific features</li>
                        <li><strong>Feature Maps:</strong> Output matrices showing where features were detected</li>
                        <li><strong>Translation Equivariance:</strong> Same features detected regardless of position</li>
                    </ul>

                    <h4>Pooling Operations</h4>
                    <p><strong>Max Pooling:</strong> $P(i,j) = \max_{(m,n) \in R_{i,j}} F(m,n)$</p>
                    <p><strong>Average Pooling:</strong> $P(i,j) = \frac{1}{|R_{i,j}|} \sum_{(m,n) \in R_{i,j}} F(m,n)$</p>

                    <p>Where $R_{i,j}$ represents the pooling window region.</p>

                    <p><strong>Benefits:</strong></p>
                    <ul>
                        <li><strong>Dimensionality Reduction:</strong> Reduces computational load</li>
                        <li><strong>Translation Invariance:</strong> Small shifts don't change output</li>
                        <li><strong>Feature Abstraction:</strong> Focuses on most relevant information</li>
                    </ul>
                </div>

                <div class="tab-panel" data-tab-title="Instructions">
                    <h3>How to Use This Demo</h3>

                    <h4>Input Controls</h4>
                    <ul>
                        <li><strong>Input Image:</strong> Select different patterns to see how filters respond
                            <ul>
                                <li>Simple Pattern: Cross shape for basic testing</li>
                                <li>Vertical/Horizontal Edges: Test edge detection filters</li>
                                <li>Checkerboard: High-frequency pattern</li>
                                <li>Gradient: Smooth intensity transition</li>
                            </ul>
                        </li>
                    </ul>

                    <h4>Filter Controls</h4>
                    <ul>
                        <li><strong>Filter Type:</strong> Choose predefined filters or create custom ones
                            <ul>
                                <li>Vertical/Horizontal Edge: Detect specific edge orientations</li>
                                <li>Blur: Smooth the image</li>
                                <li>Sharpen: Enhance edges and details</li>
                                <li>Custom: Design your own 3×3 filter</li>
                            </ul>
                        </li>
                        <li><strong>Custom Filter Editor:</strong> Manually adjust filter values when "Custom" is selected</li>
                    </ul>

                    <h4>Pooling Controls</h4>
                    <ul>
                        <li><strong>Pooling Type:</strong> Choose between max and average pooling</li>
                        <li><strong>Window Size:</strong> Adjust pooling window (2×2, 3×3, 4×4)</li>
                    </ul>

                    <h4>Interactive Features</h4>
                    <ul>
                        <li><strong>Hover Highlighting:</strong> Mouse over output cells to see corresponding input regions</li>
                        <li><strong>Real-time Updates:</strong> All changes update visualizations immediately</li>
                        <li><strong>Color Coding:</strong> Values use consistent color mapping across all displays</li>
                    </ul>
                </div>

                <div class="tab-panel" data-tab-title="Tips">
                    <h3>Exploration Tips</h3>

                    <h4>Understanding Filters</h4>
                    <ul>
                        <li><strong>Edge Detection:</strong> Try vertical edge filter on horizontal edges input - notice weak response</li>
                        <li><strong>Filter Design:</strong> Positive values detect light-to-dark transitions, negative detect dark-to-light</li>
                        <li><strong>Blur vs Sharpen:</strong> Compare how blur smooths features while sharpen enhances them</li>
                    </ul>

                    <h4>Pooling Insights</h4>
                    <ul>
                        <li><strong>Max vs Average:</strong> Max pooling preserves strong features, average provides smoother results</li>
                        <li><strong>Window Size:</strong> Larger windows create more aggressive downsampling</li>
                        <li><strong>Information Loss:</strong> Notice how pooling reduces detail but maintains overall structure</li>
                    </ul>

                    <h4>Interactive Learning</h4>
                    <ul>
                        <li><strong>Hover Exploration:</strong> Use mouse hover to understand spatial relationships</li>
                        <li><strong>Custom Experiments:</strong> Create custom filters to test specific hypotheses</li>
                        <li><strong>Pattern Matching:</strong> Try different input-filter combinations to see feature detection</li>
                    </ul>

                    <h4>Real-World Applications</h4>
                    <ul>
                        <li><strong>Computer Vision:</strong> These operations are fundamental to image recognition</li>
                        <li><strong>Medical Imaging:</strong> Edge detection helps identify tissue boundaries</li>
                        <li><strong>Engineering:</strong> Feature detection in structural analysis and defect identification</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="demo-area">
            <div class="plot-container">
                <div style="display: flex; gap: 20px; align-items: flex-start;">
                    <div>
                        <h3>Input Image</h3>
                        <canvas id="input-canvas" width="200" height="200" style="border: 2px solid #ddd; border-radius: 0;"></canvas>
                    </div>
                    <div>
                        <h3>Convolution Output</h3>
                        <canvas id="conv-canvas" width="200" height="200" style="border: 2px solid #ddd; border-radius: 0;"></canvas>
                    </div>
                    <div>
                        <h3>Pooling Output</h3>
                        <canvas id="pool-canvas" width="200" height="200" style="border: 2px solid #ddd; border-radius: 0;"></canvas>
                    </div>
                </div>

                <div style="margin-top: 20px; display: flex; justify-content: center;">
                    <div style="text-align: center;">
                        <h3>Filter Visualization</h3>
                        <canvas id="filter-canvas" width="150" height="150" style="border: 2px solid #ddd; border-radius: 0;"></canvas>
                    </div>
                </div>
            </div>

            <div class="controls">
                <div class="control-group">
                    <label>Input Image:</label>
                    <select id="input-select">
                        <option value="simple">Simple Pattern</option>
                        <option value="vertical-edges">Vertical Edges</option>
                        <option value="horizontal-edges">Horizontal Edges</option>
                        <option value="checkerboard">Checkerboard</option>
                        <option value="gradient">Gradient</option>
                    </select>
                </div>

                <div class="control-group">
                    <label>Filter Type:</label>
                    <select id="filter-select">
                        <option value="edge-vertical">Vertical Edge</option>
                        <option value="edge-horizontal">Horizontal Edge</option>
                        <option value="blur">Blur</option>
                        <option value="sharpen">Sharpen</option>
                        <option value="custom">Custom</option>
                    </select>
                </div>

                <div class="control-group" id="filter-editor">
                    <label>Custom Filter (3×3):</label>
                    <div id="filter-grid" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 5px; width: 150px;">
                        <input type="number" id="f00" step="0.1" value="0" style="width: 45px;">
                        <input type="number" id="f01" step="0.1" value="0" style="width: 45px;">
                        <input type="number" id="f02" step="0.1" value="0" style="width: 45px;">
                        <input type="number" id="f10" step="0.1" value="0" style="width: 45px;">
                        <input type="number" id="f11" step="0.1" value="1" style="width: 45px;">
                        <input type="number" id="f12" step="0.1" value="0" style="width: 45px;">
                        <input type="number" id="f20" step="0.1" value="0" style="width: 45px;">
                        <input type="number" id="f21" step="0.1" value="0" style="width: 45px;">
                        <input type="number" id="f22" step="0.1" value="0" style="width: 45px;">
                    </div>
                </div>

                <div class="control-group">
                    <label>Pooling Type:</label>
                    <select id="pooling-select">
                        <option value="max">Max Pooling</option>
                        <option value="average">Average Pooling</option>
                    </select>
                </div>

                <div class="control-group">
                    <label>Pooling Size: <span id="pooling-size-display">2×2</span></label>
                    <div class="slider-container">
                        <input type="range" id="pooling-size" min="2" max="4" value="2" step="1">
                    </div>
                </div>


            </div>
        </div>

        </div>
    </div>

    <script src="../scripts/demotab.js"></script>
    <script src="script.js"></script>
</body>
</html>