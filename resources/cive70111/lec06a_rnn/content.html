<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recurrent Neural Networks</title>
    <script src="../scripts/mathjax-config.js"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="stylesheet" href="../styles.css">
    <link rel="stylesheet" href="../scripts/demotab.css">
    <link rel="stylesheet" href="../demo-common.css">
</head>
<body>
    <div class="iframe-content">
        <div class="container">

        <div class="info-tabs">
            <div class="tab-header">
            </div>

            <div class="tab-content">
                <div class="tab-panel active" data-tab-title="Introduction">
                    <strong>Recurrent Neural Networks (RNNs)</strong><br><br>
                    This interactive demo shows how Recurrent Neural Networks process sequential data step-by-step. RNNs have a "memory" that allows them to use information from previous timesteps when processing current inputs.<br><br>
                    You'll explore how the hidden state evolves over time and see how different weights and activation functions affect the network's behavior on various sequence patterns.
                </div>

                <div class="tab-panel" data-tab-title="Theory">
                    <strong>RNN Architecture Components:</strong><br><br>
                    • <strong>Hidden State:</strong> $h_t$ - Memory that carries information from previous timesteps<br>
                    • <strong>Input Weight:</strong> $W_{input}$ - How much the current input affects the hidden state<br>
                    • <strong>Hidden Weight:</strong> $W_{hidden}$ - How much the previous hidden state influences the current one<br>
                    • <strong>Bias:</strong> Constant term added to the computation<br>
                    • <strong>Activation Function:</strong> Non-linear transformation (tanh, ReLU, sigmoid)<br><br>
                    <strong>RNN Formula:</strong><br>
                    $h_t = f(W_{input} \cdot x_t + W_{hidden} \cdot h_{t-1} + bias)$<br><br>
                    Where $f$ is the activation function, $x_t$ is the input at time $t$, and $h_{t-1}$ is the previous hidden state.
                </div>

                <div class="tab-panel" data-tab-title="Instructions">
                    <strong>How to Use:</strong><br><br>
                    • <em>Select a sequence</em> from the dropdown to see different patterns (Fibonacci, linear, etc.)<br>
                    • <em>Adjust weights</em> to see how they affect hidden state evolution<br>
                    • <em>Try different activation functions</em> to understand their impact on processing<br>
                    • <em>Use "Step Forward"</em> to manually process each timestep<br>
                    • <em>Watch the visualization</em> to see how information flows through the network<br><br>
                    <strong>Sequence Types:</strong><br>
                    • <em>Fibonacci:</em> Each number is sum of previous two<br>
                    • <em>Linear:</em> Simple counting sequence<br>
                    • <em>Alternating:</em> Pattern that switches between values<br>
                    • <em>Exponential:</em> Powers of 2 sequence<br>
                    • <em>Sine Pattern:</em> Smooth oscillating values
                </div>

                <div class="tab-panel" data-tab-title="Tips">
                    <strong>Understanding RNN Behavior:</strong><br><br>
                    • <strong>Input Weight ($W_{input}$):</strong> Higher values make current input more influential<br>
                    • <strong>Hidden Weight ($W_{hidden}$):</strong> Higher values give more importance to memory<br>
                    • <strong>Activation Functions:</strong><br>
                      - <em>Tanh:</em> Outputs between -1 and 1, good for centered data<br>
                      - <em>ReLU:</em> Only positive outputs, can cause exploding gradients<br>
                      - <em>Sigmoid:</em> Outputs between 0 and 1, can suffer from vanishing gradients<br><br>
                    <strong>Observing Patterns:</strong><br>
                    • <strong>Memory Effect:</strong> See how previous inputs influence current outputs<br>
                    • <strong>Weight Impact:</strong> Notice how different weights change the sequence processing<br>
                    • <strong>Activation Choice:</strong> Different functions handle the same sequence differently
                </div>
            </div>
        </div>

        <div class="demo-area">
            <div class="plot-container">
                <div style="margin-bottom: 20px;">
                    <h4 style="margin: 0 0 10px 0; color: #2c3e50; text-align: center;">Input Sequence</h4>
                    <canvas id="input-canvas" width="500" height="150"></canvas>
                </div>

                <div style="margin-bottom: 20px;">
                    <h4 style="margin: 0 0 10px 0; color: #2c3e50; text-align: center;">RNN Cell</h4>
                    <canvas id="rnn-canvas" width="500" height="300"></canvas>
                </div>

                <div style="margin-bottom: 20px;">
                    <h4 style="margin: 0 0 10px 0; color: #2c3e50; text-align: center;">Output Sequence</h4>
                    <canvas id="output-canvas" width="500" height="200"></canvas>
                </div>
            </div>

            <div class="controls">
                <div class="control-group">
                    <label for="sequence-select">Input Sequence</label>
                    <select id="sequence-select">
                        <option value="fibonacci">Fibonacci [1, 1, 2, 3, 5]</option>
                        <option value="linear">Linear [1, 2, 3, 4, 5]</option>
                        <option value="alternating">Alternating [1, -1, 1, -1, 1]</option>
                        <option value="exponential">Exponential [1, 2, 4, 8, 16]</option>
                        <option value="sine">Sine Pattern [0, 0.5, 1, 0.5, 0]</option>
                    </select>
                </div>

                <div class="control-group">
                    <label for="input-weight">$W_{input}$ (Input Weight)</label>
                    <div class="slider-container">
                        <input type="range" id="input-weight" min="-5" max="5" step="0.5" value="1">
                        <div class="value-display" id="input-weight-value">1.0</div>
                    </div>
                </div>

                <div class="control-group">
                    <label for="hidden-weight">$W_{hidden}$ (Hidden Weight)</label>
                    <div class="slider-container">
                        <input type="range" id="hidden-weight" min="-5" max="5" step="0.5" value="0.5">
                        <div class="value-display" id="hidden-weight-value">0.5</div>
                    </div>
                </div>

                <div class="control-group">
                    <label for="bias">Bias</label>
                    <div class="slider-container">
                        <input type="range" id="bias" min="-5" max="5" step="0.5" value="0">
                        <div class="value-display" id="bias-value">0.0</div>
                    </div>
                </div>

                <div class="control-group">
                    <label for="activation-select">Activation Function</label>
                    <select id="activation-select">
                        <option value="linear">Linear</option>
                        <option value="relu">ReLU</option>
                        <option value="sigmoid">Sigmoid</option>
                        <option value="tanh" selected>Tanh</option>
                    </select>
                </div>

                <div class="control-group">
                    <div class="plot-buttons">
                        <button id="step-btn" class="generate-data-btn">Step Forward</button>
                        <button id="reset-btn" class="clear-data-btn">Reset</button>
                    </div>
                </div>

                <div class="control-group">
                    <div class="display-group">
                        <div class="display-item">
                            <label>Current Timestep:</label>
                            <span id="timestep-display" class="value-display">0</span>
                        </div>
                        <div class="display-item">
                            <label>Hidden State:</label>
                            <span id="hidden-state-display" class="value-display">0.000</span>
                        </div>
                        <div class="display-item">
                            <label>Output:</label>
                            <span id="output-display" class="value-display">0.000</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        </div>
    </div>

    <script src="../scripts/demotab.js"></script>
    <script src="script.js"></script>
    <script>
        // Initialize the demo when the page loads
        window.addEventListener('DOMContentLoaded', function() {
            // Initialize demo tabs
            new DemoTabController();

            // Initialize the demo
            new RNNDemo();
        });
    </script>
</body>
</html>