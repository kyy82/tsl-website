class DemoLoader{constructor(){this.config=null,this.hashMap={}}async init(){try{const response=await fetch("demos.json");return this.config=await response.json(),this.buildHashMap(),!0}catch(error){return console.error("Failed to load demos configuration:",error),!1}}buildHashMap(){this.hashMap={},this.config.lectures.forEach(lecture=>{lecture.locked||lecture.demos.forEach(demo=>{this.hashMap[demo.id]={path:`${demo.path}/content.html`,title:demo.title,navId:`nav-${demo.id}`}})}),this.hashMap.credits={path:"credits.html",title:"Credits",navId:"nav-credits"}}generateNavigation(){const navContainer=document.querySelector(".nav-container");if(!navContainer)return;const homeNav=document.getElementById("nav-home");navContainer.innerHTML="",homeNav&&navContainer.appendChild(homeNav),this.config.lectures.forEach(lecture=>{const navGroup=document.createElement("div");navGroup.className="nav-group";const lectureHeader=document.createElement("h4"),lectureNum=document.createElement("div");lectureNum.className="lecture-number",lectureNum.textContent=`Lecture ${lecture.lectureNumber}`;const lectureTitle=document.createElement("div");lectureTitle.className="lecture-title",lectureTitle.textContent=lecture.lectureTitle,lectureHeader.appendChild(lectureNum),lectureHeader.appendChild(lectureTitle),lecture.locked&&lectureHeader.classList.add("nav-lecture-locked"),navGroup.appendChild(lectureHeader),lecture.locked||lecture.demos.forEach(demo=>{const navItem=document.createElement("div");navItem.className="nav-item",navItem.id=`nav-${demo.id}`;const link=document.createElement("a");link.href="#",link.textContent=`â€£ ${demo.title}`,link.onclick=e=>{e.preventDefault(),window.loadContent&&window.loadContent(`${demo.path}/content.html`,demo.title,`nav-${demo.id}`)},navItem.appendChild(link),navGroup.appendChild(navItem)}),navContainer.appendChild(navGroup)});const creditsItem=document.createElement("div");creditsItem.className="nav-item nav-credits-item",creditsItem.id="nav-credits";const creditsLink=document.createElement("a");creditsLink.href="#",creditsLink.textContent="Credits",creditsLink.onclick=e=>{e.preventDefault(),window.loadContent&&window.loadContent("credits.html","Credits","nav-credits")},creditsItem.appendChild(creditsLink),navContainer.appendChild(creditsItem)}generateGallery(){const demoGrid=document.querySelector(".demo-grid");demoGrid&&(demoGrid.innerHTML="",this.config.lectures.forEach(lecture=>{if(lecture.locked){const lockedSection=document.createElement("div");lockedSection.className="lecture-section-locked";const title=document.createElement("h3");title.textContent=`Lecture ${lecture.lectureNumber}: ${lecture.lectureTitle}`;const weekBadge=document.createElement("span");weekBadge.className="week-badge-large",weekBadge.textContent=`Available Week ${lecture.week}`,lockedSection.appendChild(title),lockedSection.appendChild(weekBadge),demoGrid.appendChild(lockedSection)}else lecture.demos.forEach(demo=>{const cardLink=document.createElement("a");cardLink.href="#",cardLink.className="demo-card-link",cardLink.onclick=e=>(e.preventDefault(),e.shiftKey?window.open(`${demo.path}/content.html`,"_blank"):window.parent&&window.parent.loadContent&&window.parent.loadContent(`${demo.path}/content.html`,demo.title,`nav-${demo.id}`),!1);const card=document.createElement("div");card.className="demo-card";const preview=document.createElement("div");preview.className="demo-preview";const previewImg=document.createElement("img");previewImg.src=`${demo.path}/${demo.preview}`,previewImg.alt=`${demo.title} preview`,previewImg.style.width="100%",previewImg.style.height="100%",previewImg.style.objectFit="cover",preview.appendChild(previewImg);const lectureBadge=document.createElement("div");lectureBadge.className=`lecture-badge lecture-${lecture.lectureNumber}`,lectureBadge.textContent=`Lecture ${lecture.lectureNumber}`,preview.appendChild(lectureBadge);const content=document.createElement("div");content.className="demo-content";const title=document.createElement("h3");title.textContent=demo.title;const description=document.createElement("p");description.textContent=demo.description,content.appendChild(title),content.appendChild(description),card.appendChild(preview),card.appendChild(content),cardLink.appendChild(card),demoGrid.appendChild(cardLink)})}))}getHashMap(){return this.hashMap}isDemoAvailable(demoId){for(const lecture of this.config.lectures)if(!lecture.locked){if(lecture.demos.find(d=>d.id===demoId))return!0}return!1}getCurrentWeek(){return this.config?this.config.currentWeek:1}async setCurrentWeek(week){this.config&&(this.config.currentWeek=week,this.config.lectures.forEach(lecture=>{lecture.locked=lecture.week>week}),this.buildHashMap(),this.generateNavigation(),this.generateGallery())}}window.demoLoader=new DemoLoader,document.addEventListener("DOMContentLoaded",async()=>{await window.demoLoader.init()&&(document.querySelector(".nav-container")&&window.demoLoader.generateNavigation(),document.querySelector(".demo-grid")&&window.demoLoader.generateGallery())});